# Chat4All Production Environment Configuration
# Copy this to .env and configure with your actual secrets

# Database Configuration
DATABASE_URL=postgresql://chat4all_user:CHANGE_PASSWORD@postgres:5432/chat4all
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=true

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=kafka-1:9092,kafka-2:9092,kafka-3:9092
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_USERNAME=<your_kafka_username>
# KAFKA_SASL_PASSWORD=<your_kafka_password>

# Redis Configuration
REDIS_URL=redis://redis:6379/0
# REDIS_PASSWORD=<your_redis_password>

# MinIO/S3 Configuration
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=CHANGE_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_SECRET_KEY
MINIO_BUCKET=chat4all-files
MINIO_SECURE=true

# OAuth 2.0 & JWT Configuration
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=CHANGE_ME_IN_PRODUCTION_USE_OPENSSL_RAND_HEX_32
JWT_ALGORITHM=RS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# RSA Keys for JWT (RS256)
# Generate with:
#   openssl genrsa -out jwt-private.pem 2048
#   openssl rsa -in jwt-private.pem -pubout -out jwt-public.pem
JWT_PRIVATE_KEY_PATH=/secrets/jwt-private.pem
JWT_PUBLIC_KEY_PATH=/secrets/jwt-public.pem

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
TOKEN_EXPIRY_HOURS=24

# TLS/SSL Configuration (T015)
# Set to "true" to enable HTTPS with TLS 1.3
SSL_ENABLED=true
SSL_CERT_FILE=/app/certs/server.crt
SSL_KEY_FILE=/app/certs/server.key
# For production, use Let's Encrypt or organization CA certificates
# Enforce HTTPS redirects when SSL is enabled
FORCE_HTTPS=true

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# WebSocket Configuration
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10
WEBSOCKET_MAX_CONNECTIONS_PER_INSTANCE=10000

# Observability
LOG_LEVEL=INFO
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
PROMETHEUS_PORT=9090

# Performance Tuning
MESSAGE_BATCH_SIZE=100
OUTBOX_POLL_INTERVAL_MS=500
FILE_CHUNK_SIZE_MB=10
MAX_FILE_SIZE_MB=2048

# Feature Flags
ENABLE_WEBSOCKET=true
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_RATE_LIMITING=true

# Environment
ENVIRONMENT=production
